<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="毕业后就一直混迹在深圳的不知名攻城狮"><meta name="baidu-site-verification" content="code-osvb6rgMcu"><link rel="stylesheet" type="text/css" href="//fonts.loli.net/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.5"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.5"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><title>Linux学习-Shell编程 | sunshine-zwq</title><meta name="generator" content="Hexo 4.2.1"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Linux学习-Shell编程</h1><a id="logo" href="/.">sunshine-zwq</a><p class="description">Where there is a will, there is a way.</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="搜索"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">Linux学习-Shell编程</h1><div class="post-meta"><a href="/2021/02/24/Linux%E5%AD%A6%E4%B9%A0-Shell%E7%BC%96%E7%A8%8B/#comments" class="comment-count"></a><p><span class="date">2021/02/24</span><span><a href="/categories/linux/" class="category">linux</a></span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><h2 id="1-基本介绍"><a href="#1-基本介绍" class="headerlink" title="1.基本介绍"></a>1.基本介绍</h2><p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/015.png" alt=""></p>
<p>Shell 是一个命令行解释器，它为用户提供了一个向 Linux 内核发送请求以便运行程序的界面系统级程序，用户可以用 Shell 来启动、挂起、停止甚至是编写一些程序。</p>
<h2 id="2-shell编程快速入门"><a href="#2-shell编程快速入门" class="headerlink" title="2. shell编程快速入门"></a>2. shell编程快速入门</h2><h3 id="2-1-脚本格式要求"><a href="#2-1-脚本格式要求" class="headerlink" title="2.1 脚本格式要求"></a>2.1 脚本格式要求</h3><p>1) 脚本以 <code>#!/bin/bash</code> 开头（指定解析器）</p>
<p>2) 脚本需要有可执行权限</p>
<h3 id="2-2-编写第一个-Shell-脚本"><a href="#2-2-编写第一个-Shell-脚本" class="headerlink" title="2.2 编写第一个 Shell 脚本"></a>2.2 编写第一个 Shell 脚本</h3><p>需求：创建一个 Shell 脚本，输出 hello world!</p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/016.png" alt=""></p>
<h3 id="2-3-脚本的常用执行方式"><a href="#2-3-脚本的常用执行方式" class="headerlink" title="2.3 脚本的常用执行方式"></a>2.3 脚本的常用执行方式</h3><ul>
<li><p>方式 1（输入脚本的 <strong>绝对路径</strong> 或 <strong>相对路径</strong>）</p>
<p>1) 首先要赋予 helloworld.sh 脚本的 +x 权限<br>2) 执行脚本</p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/017.png" alt=""></p>
</li>
<li><p>方式 2（sh+脚本），不推荐</p>
<p>说明：不用赋予脚本+x 权限，直接执行即可</p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/018.png" alt=""></p>
</li>
</ul>
<h2 id="3-shell的变量"><a href="#3-shell的变量" class="headerlink" title="3.shell的变量"></a>3.shell的变量</h2><h3 id="3-1-shell变量的介绍"><a href="#3-1-shell变量的介绍" class="headerlink" title="3.1 shell变量的介绍"></a>3.1 shell变量的介绍</h3><p>1）Linux Shell 中的变量分为：<strong>系统变量</strong> 和 <strong>用户自定义变量</strong>。<br>2）系统变量：<code>$HOME</code>、<code>$PWD</code>、<code>$SHELL</code>、<code>$USER</code> 等等<br>比如： <code>echo $HOME</code> 等等..</p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/019.png" alt=""></p>
<p>3）显示当前 shell 中所有变量：<code>set</code></p>
<h3 id="3-2-shell变量的定义"><a href="#3-2-shell变量的定义" class="headerlink" title="3.2 shell变量的定义"></a>3.2 shell变量的定义</h3><ul>
<li><p>基本语法：</p>
<ul>
<li>定义变量：<code>变量=值</code></li>
<li>撤销变量：<code>unset 变量</code></li>
<li>声明静态变量：<code>readonly 变量</code>，注意：不能 unset</li>
</ul>
</li>
<li><p>应用案例：</p>
<ul>
<li><p>定义变量 A，撤销变量 A</p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/020.png" alt=""></p>
</li>
<li><p>声明静态的变量 B=2，不能 unset</p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/021.png" alt=""></p>
</li>
</ul>
</li>
</ul>
<h3 id="3-3-定义变量的规则"><a href="#3-3-定义变量的规则" class="headerlink" title="3.3 定义变量的规则"></a>3.3 定义变量的规则</h3><p>1) 变量名称可以由字母、数字和下划线组成，但是不能以数字开头，<strong>环境变量名建议大写</strong></p>
<p>2) <strong>等号两侧不能有空格</strong></p>
<p>3) 在bash中，变量默认类型都是字符串类型，无法直接进行数值运算</p>
<p>4) 变量的值如果有空格，需要使用双引号或单引号括起来</p>
<h3 id="3-4-将命令的返回值赋给变量（重点）"><a href="#3-4-将命令的返回值赋给变量（重点）" class="headerlink" title="3.4 将命令的返回值赋给变量（重点）"></a>3.4 将命令的返回值赋给变量（重点）</h3><p>1）A=`ls -la` 反引号，运行里面的命令，并把结果返回给变量 A<br>2）A=$(ls -la) 等价于反引号</p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/022.png" alt=""></p>
<h2 id="4-设置环境变量"><a href="#4-设置环境变量" class="headerlink" title="4.设置环境变量"></a>4.设置环境变量</h2><ul>
<li><p>基本语法：</p>
<p>1) <code>export 变量名=变量值</code> （功能描述：将 shell 变量输出为环境变量）<br>2) <code>source 配置文件</code> （功能描述：让修改后的配置信息立即生效）<br>3) <code>echo $变量名</code> （功能描述：查询环境变量的值）</p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/023.png" alt=""></p>
</li>
<li><p>应用案例：</p>
<ul>
<li><p>在/etc/profile 文件中定义 TOMCAT_HOME 环境变量</p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/024.png" alt=""></p>
</li>
<li><p>查看环境变量 TOMCAT_HOME 的值</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo $TOMCAT_HOME</span><br></pre></td></tr></table></figure>
</li>
<li><p>在另外一个 shell 程序中使用 TOMCAT_HOME</p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/025.png" alt=""></p>
</li>
</ul>
</li>
</ul>
<h2 id="5-位置参数变量"><a href="#5-位置参数变量" class="headerlink" title="5.位置参数变量"></a>5.位置参数变量</h2><blockquote>
<p>当我们执行一个 shell 脚本时，如果希望获取到命令行的参数信息，就可以使用到位置参数变量，比如 ： <code>./myshell.sh 100 200</code> , 这个就是一个执行 shell 的命令行，可以在 myshell 脚本中获取到参数信息</p>
</blockquote>
<ul>
<li><p>基本语法：</p>
<ul>
<li><code>$n</code>（功能描述：n 为数字，<code>$0</code> 代表命令本身，<code>$1</code>-<code>$9</code> 代表第一到第九个参数，十以上的参数需要用大括号包含，如<code>${10}</code>）</li>
<li><code>$*</code>（功能描述：这个变量代表命令行中所有的参数，<code>$*</code>把所有的参数看成一个整体）</li>
<li><code>$@</code>（功能描述：这个变量也代表命令行中所有的参数，不过<code>$@</code>把每个参数区分对待）</li>
<li><code>$#</code>（功能描述：这个变量代表命令行中所有参数的个数）</li>
</ul>
</li>
<li><p>应用案例：编写一个 shell 脚本 positionPara.sh ， 在脚本中获取到命令行的各个参数信息</p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/026.png" alt=""></p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/027.png" alt=""></p>
</li>
<li><p>比较<code>$*</code>和<code>$@</code>区别</p>
<ul>
<li><p><code>$*</code>和<code>$@</code>都表示传递给函数或脚本的所有参数，不被双引号“”包含时，都以<code>$1</code> <code>$2</code> …<code>$n</code>的形式输出所有参数</p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/046.png" alt=""></p>
</li>
<li><p>当它们被双引号“”包含时，<code>$*</code>会将所有的参数作为一个整体，以“<code>$1</code> <code>$2</code> …<code>$n</code>”的形式输出所有参数；<code>$@</code>会将各个参数分开，以<code>$1</code> <code>$2</code>…<code>$n</code>的形式输出所有参数</p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/047.png" alt=""></p>
</li>
</ul>
</li>
</ul>
<h2 id="6-预定义变量"><a href="#6-预定义变量" class="headerlink" title="6.预定义变量"></a>6.预定义变量</h2><blockquote>
<p> shell 设计者事先已经定义好的变量，可以直接在 shell 脚本中使用</p>
</blockquote>
<ul>
<li><p>基本语法：</p>
<ul>
<li><code>$$</code> （功能描述：当前进程的进程号（PID））</li>
<li><code>$!</code> （功能描述：后台运行的最后一个进程的进程号（PID））</li>
<li><code>$?</code> （功能描述：最后一次执行的命令的返回状态。如果这个变量的值为 0，证明上一个命令正确执行；如果这个变量的值为非 0（具体是哪个数，由命令自己来决定），则证明上一个命令执行不正确了。）</li>
</ul>
</li>
<li><p>应用案例：在一个 shell 脚本中简单使用一下预定义变量</p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/028.png" alt=""></p>
</li>
</ul>
<h2 id="7-运算符"><a href="#7-运算符" class="headerlink" title="7.运算符"></a>7.运算符</h2><ul>
<li><p>基本语法：</p>
<ul>
<li><code>$((运算式))</code>或<code>$[运算式]</code></li>
<li><code>expr m + n</code> （注意 expr 运算符间要有空格）</li>
<li><code>expr m - n</code></li>
<li><code>expr \*, /, %</code> （乘，除，取余）</li>
</ul>
</li>
<li><p>应用案例：</p>
<ul>
<li><p>计算（2+3）X4 的值</p>
<ul>
<li><p><code>$((运算式))</code></p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/029.png" alt=""></p>
</li>
<li><p><code>$[运算式]</code></p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/030.png" alt=""></p>
</li>
<li><p>expr</p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/031.png" alt=""></p>
</li>
</ul>
</li>
<li><p>请求出命令行的两个参数[整数]的和</p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/032.png" alt=""></p>
</li>
</ul>
</li>
</ul>
<h2 id="8-条件判断"><a href="#8-条件判断" class="headerlink" title="8.条件判断"></a>8.条件判断</h2><ul>
<li><p>基本语法：</p>
<ul>
<li><code>[ condition ]</code>（注意 condition 前后要有空格）非空返回 true，可使用<code>$?</code>验证（0 为 true，&gt;1 为 false）</li>
</ul>
</li>
<li><p>常用判断条件：</p>
<ul>
<li>两个整数的比较<ul>
<li><code>=</code> 字符串比较</li>
<li><code>-lt</code> 小于</li>
<li><code>-le</code>小于等于</li>
<li><code>-eq</code> 等于</li>
<li><code>-gt</code> 大于</li>
<li><code>-ge</code> 大于等于</li>
<li><code>-ne</code> 不等于</li>
</ul>
</li>
<li>按照文件权限进行判断<ul>
<li><code>-r</code> 有读的权限 <code>[ -r 文件 ]</code></li>
<li><code>-w</code> 有写的权限</li>
<li><code>-x</code> 有执行的权限</li>
</ul>
</li>
<li>按照文件类型进行判断<ul>
<li><code>-f</code> 文件存在并且是一个常规的文件</li>
<li><code>-e</code> 文件存在</li>
<li><code>-d</code> 文件存在并是一个目录</li>
</ul>
</li>
</ul>
</li>
<li><p>应用案例：</p>
<ul>
<li><p><code>[ test ]</code> 返回 true</p>
</li>
<li><p><code>[  ]</code> 返回 false</p>
</li>
<li><p>“ok”是否等于”ok”</p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/033.png" alt=""></p>
</li>
<li><p>23 是否大于等于 22</p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/034.png" alt=""></p>
</li>
<li><p>/root/install.log 目录中的文件是否存在</p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/035.png" alt=""></p>
</li>
</ul>
</li>
</ul>
<h2 id="9-流程控制"><a href="#9-流程控制" class="headerlink" title="9.流程控制"></a>9.流程控制</h2><h3 id="9-1-if判断"><a href="#9-1-if判断" class="headerlink" title="9.1 if判断"></a>9.1 if判断</h3><ul>
<li><p>基本语法：<code>[ 条件判断式 ]</code>，中括号和条件判断式之间必须有空格</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if [ 条件判断式 ]</span><br><span class="line">then</span><br><span class="line">	程序</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p>或者</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if [ 条件判断式 ]</span><br><span class="line">then</span><br><span class="line">	程序</span><br><span class="line">elif [ 条件判断式 ]</span><br><span class="line">then</span><br><span class="line">	程序</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
</li>
<li><p>应用案例：请编写一个 shell 程序，如果输入的参数，大于等于 60，则输出 “及格了”，如果小于 60，则输出 “不及格”</p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/036.png" alt=""></p>
</li>
</ul>
<h3 id="9-2-case语句"><a href="#9-2-case语句" class="headerlink" title="9.2 case语句"></a>9.2 case语句</h3><ul>
<li><p>基本语法：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">case $变量名 in</span><br><span class="line">"值1"）</span><br><span class="line">如果变量的值等于值1，则执行程序1</span><br><span class="line">;;</span><br><span class="line">"值2"）</span><br><span class="line">如果变量的值等于值2，则执行程序2</span><br><span class="line">;;</span><br><span class="line">…省略其他分支…</span><br><span class="line">*）</span><br><span class="line">如果变量的值都不是以上的值，则执行此程序</span><br><span class="line">;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>
</li>
<li><p>应用案例：当命令行参数是 1 时，输出 “周一”, 是 2 时，就输出”周二”， 其它情况输出 “other”</p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/037.png" alt=""></p>
</li>
</ul>
<h3 id="9-3-for循环"><a href="#9-3-for循环" class="headerlink" title="9.3 for循环"></a>9.3 for循环</h3><ul>
<li><p>基本语法：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for 变量 in 值1 值2 值3 …</span><br><span class="line">do</span><br><span class="line">	程序</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>或者</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for ((初始值;循环控制条件;变量变化))</span><br><span class="line">do</span><br><span class="line">	程序</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
</li>
<li><p>应用案例：</p>
<ul>
<li><p>打印命令行输入的参数 【会使用到$* $@】</p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/038.png" alt=""></p>
</li>
<li><p>从 1 加到 100 的值输出显示</p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/039.png" alt=""></p>
</li>
</ul>
</li>
</ul>
<h3 id="9-4-while循环"><a href="#9-4-while循环" class="headerlink" title="9.4 while循环"></a>9.4 while循环</h3><ul>
<li><p>基本语法：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">while [ 条件判断式 ]</span><br><span class="line">do</span><br><span class="line">	程序</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
</li>
<li><p>应用案例：从命令行输入一个数 n，统计从 1+..+ n 的值是多少？</p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/040.png" alt=""></p>
</li>
</ul>
<h2 id="10-read读取控制台输入"><a href="#10-read读取控制台输入" class="headerlink" title="10.read读取控制台输入"></a>10.read读取控制台输入</h2><ul>
<li><p>基本语法：<code>read(选项)(变量)</code></p>
<ul>
<li>选项：<ul>
<li>-p：指定读取值时的提示符；</li>
<li>-t：指定读取值时等待的时间（秒），如果没有在指定的时间内输入，就不再等待了</li>
</ul>
</li>
<li>变量：指定读取值的变量名</li>
</ul>
</li>
<li><p>应用案例：</p>
<p>案例 1：读取控制台输入一个 num 值<br>案例 2：读取控制台输入一个 num 值，在 10 秒内输入。</p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/041.png" alt=""></p>
</li>
</ul>
<h2 id="11-函数"><a href="#11-函数" class="headerlink" title="11.函数"></a>11.函数</h2><blockquote>
<p>shell 编程和其它编程语言一样，有系统函数，也可以自定义函数。</p>
</blockquote>
<h3 id="11-1-系统函数"><a href="#11-1-系统函数" class="headerlink" title="11.1 系统函数"></a>11.1 系统函数</h3><ul>
<li><code>basename</code> （功能：返回完整路径最后 / 的部分，常用于获取文件名）<ul>
<li>基本语法：<code>basename [string] [suffix]</code> （功能描述：basename 命令会删掉所有的前缀包括最后一个（‘/’）字符，然后将字符串显示出来。</li>
<li>选项：suffix 为后缀，如果 suffix 被指定了，basename 会将 pathname 或 string 中的 suffix 去掉。</li>
</ul>
</li>
<li><code>dirname</code> （功能：返回完整路径最后 / 的前面的部分，常用于返回路径部分）<ul>
<li>基本语法：<code>dirname 文件绝对路径</code> （功能描述：从给定的包含绝对路径的文件名中去除文件名（非目录的部分），然后返回剩下的路径（目录的部分））</li>
</ul>
</li>
</ul>
<p>应用案例：</p>
<ul>
<li><p>请返回 /home/aaa/test.txt 的 “test.txt” 部分</p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/042.png" alt=""></p>
</li>
<li><p>请返回 /home/aaa/test.txt 的 /home/aaa</p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/043.png" alt=""></p>
</li>
</ul>
<h3 id="11-2-自定义函数"><a href="#11-2-自定义函数" class="headerlink" title="11.2 自定义函数"></a>11.2 自定义函数</h3><ul>
<li><p>基本语法：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[ function ] funname[()]</span><br><span class="line">&#123;</span><br><span class="line">	Action;</span><br><span class="line">	[return int;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>调用直接写函数名：<code>funname [值]</code></p>
</li>
<li><p>应用案例：计算输入两个参数的和（read）， getSum</p>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/044.png" alt=""></p>
</li>
</ul>
<h2 id="12-Shell工具"><a href="#12-Shell工具" class="headerlink" title="12.Shell工具"></a>12.Shell工具</h2><h3 id="12-1-cut"><a href="#12-1-cut" class="headerlink" title="12.1 cut"></a>12.1 cut</h3><blockquote>
<p>cut的工作就是“剪”，具体的说就是在文件中负责剪切数据用的。cut 命令从文件的每一行剪切字节、字符和字段并将这些字节、字符和字段输出。</p>
</blockquote>
<ul>
<li><p>基本语法：<code>cut [选项参数]  filename</code> （说明：默认分隔符是制表符）</p>
</li>
<li><p>选项参数：</p>
<ul>
<li>-f：列号，提取第几列，从1开始</li>
<li>-d：分隔符，按照指定分隔符分割列</li>
</ul>
</li>
<li><p>应用案例：</p>
<ul>
<li><p>数据准备</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop101 datas]$ touch cut.txt</span><br><span class="line">[atguigu@hadoop101 datas]$ vim cut.txt</span><br><span class="line">dong shen</span><br><span class="line">guan zhen</span><br><span class="line">wo  wo</span><br><span class="line">lai  lai</span><br><span class="line">le  le</span><br></pre></td></tr></table></figure>
</li>
<li><p>切割cut.txt第一列</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop101 datas]$ cut -d " " -f 1 cut.txt </span><br><span class="line">dong</span><br><span class="line">guan</span><br><span class="line">wo</span><br><span class="line">lai</span><br><span class="line">le</span><br></pre></td></tr></table></figure>
</li>
<li><p>切割cut.txt第二、三列</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop101 datas]$ cut -d " " -f 2,3 cut.txt </span><br><span class="line">shen</span><br><span class="line">zhen</span><br><span class="line"> wo</span><br><span class="line"> lai</span><br><span class="line"> le</span><br></pre></td></tr></table></figure>
</li>
<li><p>在cut.txt文件中切割出guan</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop101 datas]$ cat cut.txt | grep "guan" | cut -d " " -f 1</span><br><span class="line">guan</span><br></pre></td></tr></table></figure>
</li>
<li><p>选取系统PATH变量值，第2个“：”开始后的所有路径</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop101 datas]$ echo $PATH</span><br><span class="line">/usr/lib64/qt-3.3/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/atguigu/bin</span><br><span class="line"></span><br><span class="line">[atguigu@hadoop102 datas]$ echo $PATH | cut -d: -f 2-</span><br><span class="line">/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/atguigu/bin</span><br></pre></td></tr></table></figure>
</li>
<li><p>切割ifconfig 后打印的IP地址</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop101 datas]$ ifconfig eth0 | grep "inet addr" | cut -d: -f 2 | cut -d" " -f1</span><br><span class="line">192.168.1.102</span><br></pre></td></tr></table></figure>



</li>
</ul>
</li>
</ul>
<h3 id="12-2-sed"><a href="#12-2-sed" class="headerlink" title="12.2 sed"></a>12.2 sed</h3><blockquote>
<p>sed是一种流编辑器，它一次处理一行内容。处理时，把当前处理的行存储在临时缓冲区中，称为“模式空间”，接着用sed命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。接着处理下一行，这样不断重复，直到文件末尾。文件内容并没有改变，除非你使用重定向存储输出。</p>
</blockquote>
<ul>
<li><p>基本语法：<code>sed [选项参数] &#39;command&#39; filename</code></p>
</li>
<li><p>选项参数说明：</p>
<ul>
<li>-e：直接在指令列模式上进行sed的动作编辑</li>
</ul>
</li>
<li><p>命令功能描述：</p>
<ul>
<li>a：新增，a的后面可以接字串，在下一行出现</li>
<li>d：删除</li>
<li>s：查找并替换</li>
</ul>
</li>
<li><p>应用案例：</p>
<ul>
<li><p>数据准备</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 datas]$ touch sed.txt</span><br><span class="line">[atguigu@hadoop102 datas]$ vim sed.txt</span><br><span class="line">dong shen</span><br><span class="line">guan zhen</span><br><span class="line">wo  wo</span><br><span class="line">lai  lai</span><br><span class="line"></span><br><span class="line">le  le</span><br></pre></td></tr></table></figure>
</li>
<li><p>将“mei nv”这个单词插入到sed.txt第二行下，打印</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 datas]$ sed '2a mei nv' sed.txt </span><br><span class="line">dong shen</span><br><span class="line">guan zhen</span><br><span class="line">mei nv</span><br><span class="line">wo  wo</span><br><span class="line">lai  lai</span><br><span class="line"></span><br><span class="line">le  le</span><br><span class="line">[atguigu@hadoop102 datas]$ cat sed.txt </span><br><span class="line">dong shen</span><br><span class="line">guan zhen</span><br><span class="line">wo  wo</span><br><span class="line">lai  lai</span><br><span class="line"></span><br><span class="line">le  le</span><br></pre></td></tr></table></figure>

<p>注意：文件并没有改变</p>
</li>
<li><p>删除sed.txt文件所有包含wo的行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 datas]$ sed '/wo/d' sed.txt</span><br><span class="line">dong shen</span><br><span class="line">guan zhen</span><br><span class="line">lai  lai</span><br><span class="line"></span><br><span class="line">le  le</span><br></pre></td></tr></table></figure>
</li>
<li><p>将sed.txt文件中wo替换为ni</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 datas]$ sed 's/wo/ni/g' sed.txt </span><br><span class="line">dong shen</span><br><span class="line">guan zhen</span><br><span class="line">ni  ni</span><br><span class="line">lai  lai</span><br><span class="line"></span><br><span class="line">le  le</span><br></pre></td></tr></table></figure>

<p>注意：‘g’表示global，全部替换</p>
</li>
<li><p>将sed.txt文件中的第二行删除并将wo替换为ni</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 datas]$ sed -e '2d' -e 's/wo/ni/g' sed.txt </span><br><span class="line">dong shen</span><br><span class="line">ni  ni</span><br><span class="line">lai  lai</span><br><span class="line"></span><br><span class="line">le  le</span><br></pre></td></tr></table></figure>



</li>
</ul>
</li>
</ul>
<h3 id="12-3-awk"><a href="#12-3-awk" class="headerlink" title="12.3 awk"></a>12.3 awk</h3><blockquote>
<p>一个强大的文本分析工具，把文件逐行的读入，以空格为默认分隔符将每行切片，切开的部分再进行分析处理。</p>
</blockquote>
<ul>
<li><p>基本语法：</p>
<p><code>awk [选项参数] &#39;pattern1{action1} pattern2{action2}...&#39; filename</code></p>
<p>pattern：表示AWK在数据中查找的内容，就是匹配模式</p>
<p>action：在找到匹配内容时所执行的一系列命令</p>
</li>
<li><p>选项参数说明：</p>
<ul>
<li>-F：指定输入文件折分隔符</li>
<li>-v：赋值一个用户定义变量</li>
</ul>
</li>
<li><p>应用案例：</p>
<ul>
<li><p>数据准备</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 datas]$ sudo cp /etc/passwd ./</span><br></pre></td></tr></table></figure>
</li>
<li><p>搜索passwd文件以root关键字开头的所有行，并输出该行的第7列</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 datas]$ awk -F: '/^root/&#123;print $7&#125;' passwd </span><br><span class="line">/bin/bash</span><br></pre></td></tr></table></figure>
</li>
<li><p>搜索passwd文件以root关键字开头的所有行，并输出该行的第1列和第7列，中间以“，”号分割</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 datas]$ awk -F: '/^root/&#123;print $1","$7&#125;' passwd </span><br><span class="line">root,/bin/bash</span><br></pre></td></tr></table></figure>
</li>
<li><p>只显示/etc/passwd的第一列和第七列，以逗号分割，且在所有行前面添加列名user，shell在最后一行添加”dahaige，/bin/zuishuai”</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 datas]$ awk -F : 'BEGIN&#123;print "user, shell"&#125; &#123;print $1","$7&#125; END&#123;print "dahaige,/bin/zuishuai"&#125;' passwd</span><br><span class="line">user, shell</span><br><span class="line">root,/bin/bash</span><br><span class="line">bin,/sbin/nologin</span><br><span class="line">。。。</span><br><span class="line">atguigu,/bin/bash</span><br><span class="line">dahaige,/bin/zuishuai</span><br></pre></td></tr></table></figure>

<p>注意：BEGIN 在所有数据读取行之前执行；END 在所有数据执行之后执行。</p>
</li>
<li><p>将passwd文件中的用户id增加数值1并输出</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 datas]$ awk -v i=1 -F: '&#123;print $3+i&#125;' passwd</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>awk的内置变量</p>
<ul>
<li><p>FILENAME：文件名</p>
</li>
<li><p>NR：已读的记录数</p>
</li>
<li><p>NF：浏览记录的域的个数（切割后，列的个数）</p>
</li>
<li><p>应用案例：</p>
<ul>
<li><p>统计passwd文件名，每行的行号，每行的列数</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 datas]$ awk -F: '&#123;print "filename:"  FILENAME ", linenumber:" NR  ",columns:" NF&#125;' passwd </span><br><span class="line">filename:passwd, linenumber:1,columns:7</span><br><span class="line">filename:passwd, linenumber:2,columns:7</span><br><span class="line">filename:passwd, linenumber:3,columns:7</span><br></pre></td></tr></table></figure>
</li>
<li><p>切割IP</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 datas]$ ifconfig eth0 | grep "inet addr" | awk -F: '&#123;print $2&#125;' | awk -F " " '&#123;print $1&#125;' </span><br><span class="line">192.168.1.102</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询sed.txt中空行所在的行号</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 datas]$ awk '/^$/&#123;print NR&#125;' sed.txt </span><br><span class="line">5</span><br></pre></td></tr></table></figure>



</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="12-4-sort"><a href="#12-4-sort" class="headerlink" title="12.4 sort"></a>12.4 sort</h3><blockquote>
<p>sort命令是在Linux里非常有用，它将文件进行排序，并将排序结果标准输出。</p>
</blockquote>
<ul>
<li><p>基本语法：<code>sort(选项)(参数)</code> （参数：指定待排序的文件列表）</p>
</li>
<li><p>选项说明：</p>
<ul>
<li>-n：依照数值的大小排序</li>
<li>-r：以相反的顺序来排序</li>
<li>-t：设置排序时所用的分隔字符</li>
<li>-k：指定需要排序的列</li>
</ul>
</li>
<li><p>应用案例：</p>
<ul>
<li><p>数据准备</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 datas]$ touch sort.sh</span><br><span class="line">[atguigu@hadoop102 datas]$ vim sort.sh </span><br><span class="line">bb:40:5.4</span><br><span class="line">bd:20:4.2</span><br><span class="line">xz:50:2.3</span><br><span class="line">cls:10:3.5</span><br><span class="line">ss:30:1.6</span><br></pre></td></tr></table></figure>
</li>
<li><p>按照“：”分割后的第三列倒序排序</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 datas]$ sort -t : -nrk 3  sort.sh </span><br><span class="line">bb:40:5.4</span><br><span class="line">bd:20:4.2</span><br><span class="line">cls:10:3.5</span><br><span class="line">xz:50:2.3</span><br><span class="line">ss:30:1.6</span><br></pre></td></tr></table></figure>



</li>
</ul>
</li>
</ul>
<h2 id="13-Shell编程综合案例"><a href="#13-Shell编程综合案例" class="headerlink" title="13.Shell编程综合案例"></a>13.Shell编程综合案例</h2><blockquote>
<p>需求：</p>
<p>1) 每天凌晨 2:10 备份 数据库 atguiguDB 到 /data/backup/db<br>2) 备份开始和备份结束能够给出相应的提示信息<br>3) 备份后的文件要求以备份时间为文件名，并打包成 .tar.gz 的形式，比如：2018-03-12_230201.tar.gz<br>4) 在备份的同时，检查是否有 10 天前备份的数据库文件，如果有就将其删除。</p>
</blockquote>
<ul>
<li>思路分析</li>
</ul>
<p><img src="https://gitee.com/sunshine-zwq/blog-pic/raw/master/blogPics/2021/0207/045.png" alt=""></p>
<ul>
<li><p>代码实现：</p>
<ul>
<li><p>mysql_db_backup.sh</p>
<p>注意：由于脚本要在crontab中执行，mysqldump要指定绝对路径（参考链接：<a href="https://www.cnblogs.com/abclife/p/5081887.html" target="_blank" rel="noopener">mysqldump脚本crontab执行失败，但是手动执行成功</a>）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">完成数据库的定时备份</span></span><br><span class="line"><span class="meta">#</span><span class="bash">备份的路径</span></span><br><span class="line">BACKUP=/data/backup/db</span><br><span class="line"><span class="meta">#</span><span class="bash">当前的时间作为文件名</span></span><br><span class="line">DATETIME=$(date +%Y_%m_%d_%H%M%S)</span><br><span class="line"></span><br><span class="line">echo "======开始备份======"</span><br><span class="line">echo "======备份的路径是 $BACKUP/$DATETIME.tar.gz"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">主机</span></span><br><span class="line">HOST=localhost</span><br><span class="line"><span class="meta">#</span><span class="bash">用户名</span></span><br><span class="line">DB_USER=root</span><br><span class="line"><span class="meta">#</span><span class="bash">密码</span></span><br><span class="line">DB_PWD=123456</span><br><span class="line"><span class="meta">#</span><span class="bash">备份数据库名</span></span><br><span class="line">DATABASE=atguiguDB</span><br><span class="line"><span class="meta">#</span><span class="bash">创建备份的路径</span></span><br><span class="line"><span class="meta">#</span><span class="bash">如果备份的路径文件夹存在，就使用，否则先创建</span></span><br><span class="line">[ ! -d "$BACKUP/$DATETIME" ] &amp;&amp; mkdir -p "$BACKUP/$DATETIME"</span><br><span class="line"><span class="meta">#</span><span class="bash">执行mysql的数据库备份指令</span></span><br><span class="line">/usr/local/mysql/bin/mysqldump -u$&#123;DB_USER&#125; -p$&#123;DB_PWD&#125; --host=$HOST --hex-blob $DATABASE | gzip &gt; $BACKUP/$DATETIME/$DATETIME.sql.gz</span><br><span class="line"><span class="meta">#</span><span class="bash">打包备份文件</span></span><br><span class="line">cd $BACKUP</span><br><span class="line">tar -zcvf $DATETIME.tar.gz $DATETIME</span><br><span class="line"><span class="meta">#</span><span class="bash">删除临时目录</span></span><br><span class="line">rm -rf $BACKUP/$DATETIME</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">删除10天前的备份文件</span></span><br><span class="line">find $BACKUP -mtime +10 -name "*.tar.gz" -exec rm -rf &#123;&#125; \;</span><br><span class="line">echo "======备份文件成功======"</span><br></pre></td></tr></table></figure>
</li>
<li><p>定时任务crontab</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">10 2 * * * /usr/sbin/mysql_db_backup.sh</span><br></pre></td></tr></table></figure>




</li>
</ul>
</li>
</ul>
<h2 id="14-企业真实面试题"><a href="#14-企业真实面试题" class="headerlink" title="14.企业真实面试题"></a>14.企业真实面试题</h2><ul>
<li><p>京东</p>
<ul>
<li><p>使用Linux命令查询file1中空行所在的行号</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 datas]$ awk '/^$/&#123;print NR&#125;' sed.txt </span><br><span class="line">5</span><br></pre></td></tr></table></figure>
</li>
<li><p>有文件chengji.txt内容如下:</p>
<p>张三 40</p>
<p>李四 50</p>
<p>王五 60</p>
<p>使用Linux命令计算第2列的和并输出：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 datas]$ cat chengji.txt | awk -F " " '&#123;sum+=$2&#125; END&#123;print sum&#125;'</span><br><span class="line">150</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>搜狐&amp;和讯网</p>
<ul>
<li><p>Shell脚本里如何检查一个文件是否存在？如果不存在该如何处理？</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">if [ -f file.txt ]; then</span><br><span class="line">   echo "文件存在!"</span><br><span class="line">else</span><br><span class="line">   echo "文件不存在!"</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>新浪</p>
<ul>
<li><p>用shell写一个脚本，对文本中无序的一列数字排序</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@CentOS6-2 ~]# cat test.txt</span><br><span class="line">9</span><br><span class="line">8</span><br><span class="line">7</span><br><span class="line">6</span><br><span class="line">5</span><br><span class="line">4</span><br><span class="line">3</span><br><span class="line">2</span><br><span class="line">10</span><br><span class="line">1</span><br><span class="line">[root@CentOS6-2 ~]# sort -n test.txt|awk '&#123;a+=$0;print $0&#125;END&#123;print "SUM="a&#125;'</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">SUM=55</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>金和网络</p>
<ul>
<li><p>请用shell脚本写出查找当前文件夹（/home）下所有的文本文件内容中包含有字符”shen”的文件名称</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 datas]$ grep -r "shen" /home | cut -d ":" -f 1</span><br><span class="line">/home/atguigu/datas/sed.txt</span><br><span class="line">/home/atguigu/datas/cut.txt</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
</div><div class="post-copyright"><blockquote><p>原文作者: zwq</p><p>原文链接: <a href="https://sunshine-zwq.gitee.io/2021/02/24/Linux学习-Shell编程/">https://sunshine-zwq.gitee.io/2021/02/24/Linux学习-Shell编程/</a></p><p>版权声明: 转载请注明出处(必须保留作者署名及链接)</p></blockquote></div><div class="tags"><a href="/tags/linux/">linux</a></div><div class="post-share"><div class="social-share"><span>分享到:</span></div></div><div class="post-nav"><a href="/2021/03/04/ShardingSphere%E5%AD%A6%E4%B9%A0/" class="pre">ShardingSphere学习</a><a href="/2021/02/07/Linux%E5%AD%A6%E4%B9%A0-%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85-MySQL/" class="next">Linux学习-环境安装-MySQL</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-基本介绍"><span class="toc-text">1.基本介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-shell编程快速入门"><span class="toc-text">2. shell编程快速入门</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-脚本格式要求"><span class="toc-text">2.1 脚本格式要求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-编写第一个-Shell-脚本"><span class="toc-text">2.2 编写第一个 Shell 脚本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-脚本的常用执行方式"><span class="toc-text">2.3 脚本的常用执行方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-shell的变量"><span class="toc-text">3.shell的变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-shell变量的介绍"><span class="toc-text">3.1 shell变量的介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-shell变量的定义"><span class="toc-text">3.2 shell变量的定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-定义变量的规则"><span class="toc-text">3.3 定义变量的规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-将命令的返回值赋给变量（重点）"><span class="toc-text">3.4 将命令的返回值赋给变量（重点）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-设置环境变量"><span class="toc-text">4.设置环境变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-位置参数变量"><span class="toc-text">5.位置参数变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-预定义变量"><span class="toc-text">6.预定义变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-运算符"><span class="toc-text">7.运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-条件判断"><span class="toc-text">8.条件判断</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-流程控制"><span class="toc-text">9.流程控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-if判断"><span class="toc-text">9.1 if判断</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-case语句"><span class="toc-text">9.2 case语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-for循环"><span class="toc-text">9.3 for循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-while循环"><span class="toc-text">9.4 while循环</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-read读取控制台输入"><span class="toc-text">10.read读取控制台输入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-函数"><span class="toc-text">11.函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-系统函数"><span class="toc-text">11.1 系统函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-自定义函数"><span class="toc-text">11.2 自定义函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-Shell工具"><span class="toc-text">12.Shell工具</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#12-1-cut"><span class="toc-text">12.1 cut</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-2-sed"><span class="toc-text">12.2 sed</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-3-awk"><span class="toc-text">12.3 awk</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-4-sort"><span class="toc-text">12.4 sort</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-Shell编程综合案例"><span class="toc-text">13.Shell编程综合案例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-企业真实面试题"><span class="toc-text">14.企业真实面试题</span></a></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2021/05/09/Java%E5%AE%89%E5%85%A8%E5%AF%86%E7%A0%81%E5%AD%A6-%E5%AF%86%E7%A0%81%E5%AD%A6%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/">Java安全密码学-密码学基本概念</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/03/15/Dubbo%E5%85%A5%E9%97%A8/">Dubbo入门</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/03/04/ShardingSphere%E5%AD%A6%E4%B9%A0/">ShardingSphere学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/02/24/Linux%E5%AD%A6%E4%B9%A0-Shell%E7%BC%96%E7%A8%8B/">Linux学习-Shell编程</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/02/07/Linux%E5%AD%A6%E4%B9%A0-%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85-MySQL/">Linux学习-环境安装-MySQL</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/02/07/Linux%E5%AD%A6%E4%B9%A0-%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85-Eclipse/">Linux学习-环境安装-Eclipse</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/02/07/Linux%E5%AD%A6%E4%B9%A0-%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85-Tomcat/">Linux学习-环境安装-Tomcat</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/02/05/Linux%E5%AD%A6%E4%B9%A0-%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85-JDK/">Linux学习-环境安装-JDK</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/02/05/Linux%E5%AD%A6%E4%B9%A0-RPM%E4%B8%8EYUM/">Linux学习-RPM与YUM</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/02/05/Linux%E5%AD%A6%E4%B9%A0-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E6%9C%8D%E5%8A%A1/">Linux学习-进程与服务</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Dubbo/">Dubbo</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/">Java并发编程</a><span class="category-list-count">20</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Node-js/">Node.js</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Vue-js/">Vue.js</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ftp/">ftp</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/jvm/">jvm</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AF%86%E7%A0%81%E5%AD%A6/">密码学</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">正则表达式</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/ftp/" style="font-size: 15px;">ftp</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/%E5%AF%86%E7%A0%81%E5%AD%A6/" style="font-size: 15px;">密码学</a> <a href="/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" style="font-size: 15px;">并发编程</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/gitee/" style="font-size: 15px;">gitee</a> <a href="/tags/github/" style="font-size: 15px;">github</a> <a href="/tags/vue/" style="font-size: 15px;">vue</a> <a href="/tags/element-ui/" style="font-size: 15px;">element-ui</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 15px;">前端</a> <a href="/tags/jQuery/" style="font-size: 15px;">jQuery</a> <a href="/tags/json/" style="font-size: 15px;">json</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 15px;">算法</a> <a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 15px;">面试</a> <a href="/tags/jdk/" style="font-size: 15px;">jdk</a> <a href="/tags/js/" style="font-size: 15px;">js</a> <a href="/tags/js%E6%A8%A1%E5%9D%97%E5%8C%96/" style="font-size: 15px;">js模块化</a> <a href="/tags/gc/" style="font-size: 15px;">gc</a> <a href="/tags/jvm/" style="font-size: 15px;">jvm</a> <a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 15px;">正则表达式</a> <a href="/tags/Node-js/" style="font-size: 15px;">Node.js</a> <a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 15px;">工具</a> <a href="/tags/ECMAScript/" style="font-size: 15px;">ECMAScript</a> <a href="/tags/Dubbo/" style="font-size: 15px;">Dubbo</a> <a href="/tags/java8/" style="font-size: 15px;">java8</a> <a href="/tags/Lambda/" style="font-size: 15px;">Lambda</a> <a href="/tags/Stream/" style="font-size: 15px;">Stream</a> <a href="/tags/ShardingSphere/" style="font-size: 15px;">ShardingSphere</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 15px;">数据库</a> <a href="/tags/%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/" style="font-size: 15px;">分库分表</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">二月 2021</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a><span class="archive-list-count">26</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a><span class="archive-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="https://github.com/sunshine-zwq" title="我的Github" target="_blank">我的Github</a><ul></ul><a href="https://blog.csdn.net/zwq1105" title="我的CSDN博客" target="_blank">我的CSDN博客</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">网站地图</a> |  <a href="/atom.xml">订阅本站</a> |  <a href="/about/">联系博主</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次，本站总访客数:<i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>人</p><p><span> Copyright &copy;<a href="/." rel="nofollow">zwq.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/" target="_blank" rel="noopener"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.5"></script><div id="fullscreen-img" class="hide"><span class="close"></span></div><script type="text/javascript" src="/js/imgview.js?v=2.0.5" async></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.5" async></script><link rel="stylesheet" type="text/css" href="/share/css/share.css"><script type="text/javascript" src="/share/js/social-share.js" charset="utf-8"></script><script type="text/javascript" src="/share/js/qrcode.js" charset="utf-8"></script></body></html>